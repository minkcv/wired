<html>
	<head>
    <title>Wired</title>
    <script src='lib/texture-animator.js' type='text/javascript'></script>
    <script src='lib/poly-decomp.js' type='text/javascript'></script>
    <script src='lib/matter.js' type='text/javascript'></script>
    <script src='lib/three.js' type='text/javascript'></script>
    <script src='lib/stats.min.js' type='text/javascript'></script>
    <script src='lib/BufferGeometryUtils.js' type='text/javascript'></script>
    <style>
        body {
            margin: 0px;
            font-family: serif;
            color: #f442d4;
        }
        #game, #map {
            float:left;
        }
        #debug {
            display: block;
            height: 200px;
            font-family: monospace;
        }
        #debug > div{
            padding-left: 20px;
            float: left;
        }
        a {
            color: #f442d4;
            text-decoration: none;
        }
    </style>
  </head>
<body style='background-color: #000000'>
    <div id='top' style='height: 600px; overflow: hidden;'>
        <div id='game' style='width: 800px; height:600px;'></div>
        <div id='map' style='width: 500px; height:600px;'></div>
    </div>
    <div id='debug'>
        <div>THREE
        <ul class='three'>
            <li id='x-pos'></li>
            <li id='z-pos'></li>
            <li id='angle'></li>
        </ul>
    </div>
        <div>MATTER
            <ul class='matter'>
                <li id='x-pos'></li>
                <li id='y-pos'></li>
                <li id='angle'></li>
            </ul>
        </div>
    </div>
    <a style='position: absolute; bottom: 0px;' href='http://minkcv.com'>m i n k c v . c o m</a>
    <script>
    var debug = !location.origin.includes('github.io');
    var threed = document.getElementById('game');
    var stats = new Stats();
    stats.showPanel( 0 ); // 0: fps, 1: ms, 2: mb, 3+: custom
    document.body.appendChild( stats.dom );
    if (!debug) {
        document.body.removeChild(stats.dom);
        document.body.style.textAlign = 'center';
        threed.style.float = 'none';
        threed.style.marginLeft = 'auto';
        threed.style.marginRight = 'auto';
        document.getElementById('map').style.display = 'none';
        document.getElementById('debug').style.display = 'none';
        threed.style.width = '100%';
        threed.style.height = '100%';
        document.getElementById('top').style.height = '100%';
    }
    var keysDown = [];
    var keys = { up: 38, down: 40, right: 39, left: 37, a: 65, s: 83, d: 68, w: 87, shift: 16, r: 82, f: 70 };
    var mouseX = 0;
    var mouseY = 0;
    var mouseDX = 0;
    var mouseDY = 0;
    addEventListener("keydown", function(e) {
        keysDown[e.keyCode] = true;
    }, false);

    addEventListener("keyup", function(e) {
        delete keysDown[e.keyCode];
    }, false);
    threed.addEventListener('mousemove', function(e) {
        mouseDX = mouseX - e.clientX;
        mouseDY = mouseY - e.clientY;
        mouseX = e.clientX;
        mouseY = e.clientY;
    }, false);
    threed.addEventListener('mouseout', function(e) {
        mouseDX = 0;
        mouseDY = 0;
        mouseX = threed.clientWidth / 2; // Stop turning.
    }, false);
    </script>
    <script src='models/tunnel.js' type='text/javascript'></script>
    <script src='models/intersection.js' type='text/javascript'></script>
    <script src='util.js' type='text/javascript'></script>
    <script src='TH.js' type='text/javascript'></script>
    <script src='MA.js' type='text/javascript'></script>
    <script src='levels.js' type='text/javascript'></script>
    <script src='main.js' type='text/javascript'></script>
</body>
</html>
